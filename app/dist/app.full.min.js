var App={create:function(e,t){var c=Object.create(this);return Object.keys(e).forEach(function(t){c[t]=e[t]}),c}};
var Circle={renderCircle:function(e,t,r,i,n){r.style.height=2*e+"px",r.style.width=2*e+"px",r.style.position="absolute",r.style.borderRadius="50%",r.style.border=i+"px solid hsla("+n[0]+", "+n[1]+"%, "+n[2]+"%, 0.4)",r.style.boxSizing="border-box",r.style.zIndex=1,t.appendChild(r)},createCircle:function(e,t,r){return e.id="circle_"+r+"_"+t,e},getCircleCenter:function(e){var t=e.getBoundingClientRect();return{y:t.top+window.pageYOffset,x:t.left+window.pageXOffset}},isInsideHitArea:function(e,t,r,i){var n=this.getCircleCenter(t).x+r,a=this.getCircleCenter(t).y+r;return Math.sqrt(Math.pow(n-e.pageX,2)+Math.pow(a-e.pageY,2))<r&&Math.sqrt(Math.pow(n-e.pageX,2)+Math.pow(a-e.pageY,2))+i>r}};
var Container=App.create({renderContainer:function(e,n,t){this.createMainContainer(e,this.createDataContainer(t,n),n)},createContainer:function(e,n){return e.style.position="relative",e.id=n,e.className="dialer-container",document.body.appendChild(e),e},createMainContainer:function(e,n,t){var a=document.createElement("div");a.id="main-container_"+t,a.className="main-container",this.insertAfter(document.getElementById("title"),a),a.appendChild(e),a.appendChild(n)},createDataContainer:function(e,n){var t=document.createElement("div");return t.id="data-container_"+n,t.className="data-container",t.style.backgroundColor="hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, 0.2)",t.style.borderRadius="5px",t},insertAfter:function(e,n){e.parentNode.insertBefore(n,e.nextSibling)}});
var Events={draggedHandle:null,handleEvent:function(e){switch(e.type){case"touchstart":case"mousedown":e.preventDefault();for(var d=0;d<this.circles.length;d++)this.circles[d].isInsideHitArea(e,this.circles[d].circleEl,this.circles[d].circleRadius,this.circles[d].handleRadius)&&(this.draggedHandle=this.circles[d],this.draggedHandle.recalculateHandlePosition(e,this.draggedHandle.getCircleCenter(this.draggedHandle.circleEl).x+this.draggedHandle.circleRadius,this.draggedHandle.getCircleCenter(this.draggedHandle.circleEl).y+this.draggedHandle.circleRadius-this.draggedHandle.containerEl.getBoundingClientRect().top-window.pageYOffset,this.draggedHandle.setHandleRadius(this.draggedHandle.circleBorderThickness),this.draggedHandle.handleEl,this.draggedHandle.circleRadius,this.draggedHandle.containerEl.getBoundingClientRect().left,this.draggedHandle.color),this.draggedHandle.setTraceAngle(this.draggedHandle.handleAngle,this.draggedHandle.traceEl,this.draggedHandle.containerEl.getBoundingClientRect().width/2,this.draggedHandle.circleCenter.y+this.draggedHandle.circleRadius,this.draggedHandle.circleRadius-this.draggedHandle.handleRadius/2),this.draggedHandle.angleToMoney(this.draggedHandle.handleAngle,this.draggedHandle.valueEl,this.draggedHandle.minValue,this.draggedHandle.maxValue,this.draggedHandle.step),this.container.containerEl.addEventListener("mousemove",this,!1),this.container.containerEl.addEventListener("mouseup",this,!1),this.container.containerEl.addEventListener("touchmove",this,!1),this.container.containerEl.addEventListener("touchend",this,!1),this.container.containerEl.addEventListener("touchcancel",this,!1));break;case"touchmove":case"mousemove":e.preventDefault(),this.draggedHandle.recalculateHandlePosition(e,this.draggedHandle.getCircleCenter(this.draggedHandle.circleEl).x+this.draggedHandle.circleRadius,this.draggedHandle.getCircleCenter(this.draggedHandle.circleEl).y+this.draggedHandle.circleRadius-this.draggedHandle.containerEl.getBoundingClientRect().top-window.pageYOffset,this.draggedHandle.setHandleRadius(this.draggedHandle.circleBorderThickness),this.draggedHandle.handleEl,this.draggedHandle.circleRadius,this.draggedHandle.containerEl.getBoundingClientRect().left,this.draggedHandle.color),this.draggedHandle.setTraceAngle(this.draggedHandle.handleAngle,this.draggedHandle.traceEl,this.draggedHandle.containerEl.getBoundingClientRect().width/2,this.draggedHandle.circleCenter.y+this.draggedHandle.circleRadius,this.draggedHandle.circleRadius-this.draggedHandle.handleRadius/2),this.draggedHandle.angleToMoney(this.draggedHandle.handleAngle,this.draggedHandle.valueEl,this.draggedHandle.minValue,this.draggedHandle.maxValue,this.draggedHandle.step);break;case"touchend":case"touchcancel":case"mouseup":case"mouseleave":e.preventDefault(),this.container.containerEl.removeEventListener("mousemove",this,!1),this.container.containerEl.removeEventListener("mouseup",this,!1),this.container.containerEl.removeEventListener("touchmove",this,!1),this.container.containerEl.removeEventListener("touchend",this,!1),this.container.containerEl.removeEventListener("touchcancel",this,!1),this.draggedHandle=null;break;case"resize":for(var i=0;i<this.circles.length;i++)this.circles[i].positionHandle(this.circles[i].handleEl,this.circles[i].setHandlePosition(this.circles[i].containerEl.getBoundingClientRect().width/2,this.circles[i].circleY,this.circles[i].circleRadius,this.circles[i].setHandleRadius(this.circles[i].circleBorderThickness),this.circles[i].handleAngle),this.circles[i].setHandleRadius(this.circles[i].circleBorderThickness))}},bindEvents:function(){this.container.containerEl.addEventListener("mousedown",this,!1),this.container.containerEl.addEventListener("mouseleave",this,!1),window.addEventListener("resize",this,!1)}};
var Handle={renderHandle:function(n,t,e,i,l,s,a,o,d,r){this.designHandle(o,this.setHandlePosition(n,t,e,i,l),i,r,a),d.appendChild(o)},createHandle:function(n,t,e){return n.id="handle_"+e+"_"+t,n},designHandle:function(n,t,e,i,l){n.style.height=e+"px",n.style.width=e+"px",n.style.position="absolute",n.style.borderRadius="50%",n.style.backgroundColor="hsla("+i[0]/(1+2.7*l)+", "+i[1]+"%, "+i[2]+"%, 1)",n.style.border="8px solid #fff",n.style.boxSizing="border-box",n.style.boxShadow="1px #000",n.style.zIndex=3,this.positionHandle(n,t,e)},positionHandle:function(n,t,e){n.style.top=t.y-e/2+"px",n.style.left=t.x-e/2+"px"},setHandleRadius:function(n){return n},setHandlePosition:function(n,t,e,i,l){return{x:n+(e-i/2)*Math.cos(l),y:t+(e-i/2)*Math.sin(l)}},setHandleAngle:function(n,t,e){if(!n)return-Math.PI/2;var i=this.containerEl.getBoundingClientRect(),l=n.clientX,s=n.clientY-i.top,a=l-t,o=s-e;return this.handleAngle=Math.atan2(o,a),Math.atan2(o,a)},recalculateHandlePosition:function(n,t,e,i,l,s,a,o){this.designHandle(l,this.setHandlePosition(t-a,e,s,i,this.setHandleAngle(n,t,e)),i,o)}};
var Trace={renderTrace:function(t,e,r,n,a,i,s,o,c,d){this.appendTraceContainer(t,e,r,a,n),this.designTrace(e,n,a,i,s,o,c,-Math.PI/2,d)},createTrace:function(t,e,r){return t.id="trace_"+r+"_"+e,t},appendTraceContainer:function(t,e,r,n,a){this.designTraceContainer(t,e,n,a),r.appendChild(t),t.appendChild(e)},designTraceContainer:function(t,e,r,n){t.id="trace_container_"+r+"_"+n,t.style.position="absolute",t.style.zIndex="2",t.style.left="0",t.setAttribute("width","500px"),t.setAttribute("height","500px")},designTrace:function(t,e,r,n,a,i,s,o,c){return t.id="trace_"+r+"_"+e,t.style.zIndex="3",t.setAttribute("fill","none"),t.setAttribute("stroke","hsla("+c[0]+", "+c[1]+"%, "+c[2]+"%, 1)"),t.setAttribute("stroke-width",s+"px"),this.setTraceAngle(o,t,n,a,i),t},setTraceAngle:function(t,e,r,n,a){t||(t=-Math.PI/2),e.setAttribute("d",this.traceArc(r,n,a,-Math.PI/2,t))},traceArc:function(t,e,r,n,a){var i=this.polarToCartesianCoords(t,e,r,a),s=this.polarToCartesianCoords(t,e,r,n),o=a-n<=Math.PI?a-n<0&&a-n>-Math.PI/2?"1":"0":"1";return["M",i.x,i.y,"A",r,r,0,o,0,s.x,s.y].join(" ")},polarToCartesianCoords:function(t,e,r,n){return{x:t+r*Math.cos(n),y:e+r*Math.sin(n)}}};
var Value={renderValue:function(e,a,n,l,t,u,r,i,o,s){this.angleToMoney(r,u,i,o,s),e.appendChild(a),a.appendChild(n),n.appendChild(l),a.appendChild(t),a.appendChild(u)},createValueContainer:function(e,a,n){return e.id="value_container_"+n+"_"+a,e.className="value-container",e},createValueSymbol:function(e,a,n,l,t){return e.className="value-symbol",e.appendChild(a),a.id="value_symbol_"+l+"_"+n,a.className="value-symbol-abs",this.designValueSymbol(a,t,n),{valueSymbolContainer:e,valueSymbol:a}},designValueSymbol:function(e,a,n){e.style.backgroundColor="hsla("+a[0]/(1+2.7*n)+", "+a[1]+"%, "+a[2]+"%, 1)"},createValueName:function(e,a){return e.className="value-name",e.innerHTML=a,e},createValue:function(e){return e.className="value",e},angleToMoney:function(e,a,n,l,t){var u=this.roundByStep(this.mapValues(this.fixAngle(e),0,2*Math.PI,n,l),t);return a.innerHTML=u+" â‚¬",u},mapValues:function(e,a,n,l,t){return(e-n)*(t-l)/(n-a)+t},roundByStep:function(e,a,n){return Math.ceil(e/a)*a},fixAngle:function(e){var a;return e<0&&e>=-Math.PI/2&&(a=Math.abs(-Math.PI/2-e)),e>0&&(a=Math.PI/2+e),e>-Math.PI&&e<-Math.PI/2&&(a=2*Math.PI+Math.PI/2+e),a}};
Dialer={compose:function(e,n,c,l,t,a,r){var i,o,d=[];i=Object.assign({},Container),i.containerEl=i.createContainer(document.createElement("div"),t),i.renderContainer(i.containerEl,t,a);for(var s={container:i,circles:d},u=0;u<r.length;u++){d.push(Object.assign(Object.create(i),Circle,Trace,Handle,Value,{circleBorderThickness:30,circleRadius:l,circleX:50,handleAngle:2*Math.PI,color:a,dataContainer:document.getElementById("data-container_"+t),minValue:e,maxValue:n,step:c}));var m=d[u];m.circleEl=m.createCircle(document.createElement("div"),u,t),m.traceEl=m.createTrace(document.createElementNS("http://www.w3.org/2000/svg","path"),u,t),m.handleEl=m.createHandle(document.createElement("div"),u,t),m.valueElContainer=m.createValueContainer(document.createElement("div"),u,t,r[u]),m.valueElSymbolContainer=m.createValueSymbol(document.createElement("div"),document.createElement("div"),u,t,a).valueSymbolContainer,m.valueElSymbol=m.createValueSymbol(document.createElement("div"),document.createElement("div"),u,t,a).valueSymbol,m.valueElName=m.createValueName(document.createElement("div"),r[u]),m.valueEl=m.createValue(document.createElement("div"),m.handleAngle),m.handleRadius=m.setHandleRadius(m.circleBorderThickness),m.handleAngle=m.setHandleAngle(),m.circleRadius=l+u*(m.circleBorderThickness+2),d[r.length-1]&&(i.containerHeight=2*d[r.length-1].circleRadius+2*m.circleBorderThickness,i.containerEl.style.height=i.containerHeight+"px",document.getElementById("data-container_"+t).style.height=i.containerHeight+"px")}for(var E=0;E<d.length;E++){var m=d[E];m.renderValue(m.dataContainer,m.valueElContainer,m.valueElSymbolContainer,m.valueElSymbol,m.valueElName,m.valueEl,m.handleAngle,m.minValue,m.maxValue,m.step),m.circleCenter={x:m.getCircleCenter(m.circleEl).x+m.circleRadius,y:i.containerHeight/2-m.circleRadius},m.renderCircle(m.circleRadius,m.containerEl,m.circleEl,m.circleBorderThickness,a),m.circleEl.style.top=m.circleCenter.y+"px",m.circleEl.style.left="calc("+m.circleX+"% - "+m.circleRadius+"px)",m.renderTrace(document.createElementNS("http://www.w3.org/2000/svg","svg"),m.traceEl,i.containerEl,E,t,m.containerEl.getBoundingClientRect().width/2,m.circleCenter.y+m.circleRadius,m.circleRadius-m.handleRadius/2,m.circleBorderThickness,a),m.renderHandle(m.containerEl.getBoundingClientRect().width/2,m.circleCenter.y+m.circleRadius,m.circleRadius,m.handleRadius,m.handleAngle,m.circleBorderThickness,E,m.handleEl,m.containerEl,a)}return o=Object.assign(Object.create(s),Events),o.bindEvents(),s}},Dialer.compose(0,1e3,20,60,"baz",[195,53,79,1],["Shopping","Music"]),Dialer.compose(50,200,5,60,"bar",[160,100,75,1],["Shopping","Entertainment","Electronics","Transport"]),Dialer.compose(280,850,17,70,"foo",[120,93,79,1],["Shopping","Entertainment","Renovation","Transport"]),Dialer.compose(15,45,2.5,40,"another",[271,68,32,1],["Shopping","Transport"]);